#!/usr/bin/env zsh
set -ue

start_urxvtc() { "$(which -a urxvtc | tail -n 1)" $@ }
start_urxvtd() { urxvtd -o -f }

if pgrep "^urxvtd$" -u $USER &> /dev/null || start_urxvtd; then
  if ! start_urxvtc; then
    killall -9 urxvtd -u $USER # dead process?
    start_urxvtd && start_urxvtc
  fi
fi
