#!/usr/bin/env zsh

if [[ -d "/etc/X11/xinit/xinitrc.d" ]]; then
  for node in /etc/X11/xinit/xinitrc.d/*; do
    if [[ -x "$node" ]]; then
      source "$node"
    fi
  done
  unset node
fi

if [[ -f "$HOME/.Xresources" ]]; then
  xrdb -merge "$HOME/.Xresources"
fi

if [[ -f "$HOME/.Xmodmap" ]]; then
  xmodmap "$HOME/.Xmodmap"
fi

if [[ -d "$HOME/.fonts" ]]; then
  xset +fp "$HOME/.fonts"
  xset fp rehash
  fc-cache
fi

pgrep xautolock -u $USER || xautolock -time 30 -locker "slock" -secure &
pgrep xcape || xcape -e "Shift_L=parenleft;Shift_R=parenright;"

if [[ -e "$HOME/.xinitrc.local" ]]; then
  $HOME/.xinitrc.local
fi

exec dbus-launch --exit-with-session awesome
